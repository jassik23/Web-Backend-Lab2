# Web-Backend-Lab2

<img src="/images/PostgreSQL.jpg" width=200px><img src="/images/Docker.jpg" width=200px>

## Описание предметной области

Документооборот в учебном центре охватывает процессы создания, управления и хранения различных документов, связанных с обучением студентов и взаимодействием с клиентами. В данной предметной области используется база данных для эффективного хранения и управления документами.

1. **users (Пользователи)** : В системе присутствуют различные пользователи, такие как администраторы, преподаватели и другие сотрудники учебного центра. Пользователи могут создавать, редактировать и управлять документами.

2. **user_role (Роли пользователей)**: Роли определяют уровень доступа и полномочия пользователей в системе документооборота.

3. **passport (Паспортные данные)**: Документы, удостоверяющие личность клиентов, которые могут быть использованы при оформлении договоров на обучение.

4. **customer (Клиенты)**: Информация о клиентах учебного центра, включая их контактные данные и паспортные данные, может быть важна при создании и обработке документов.

5. **student (Студенты)**: Данные о студентах, такие как их идентификаторы, полные имена и контактные данные, используются при формировании документов связанных с обучением.

6. **contracts (Контракты)**: Заключение договоров на обучение требует создания документов, в которых указываются сроки обучения, стоимость и другие важные условия.


## Проектирование БД
Процесс проектирования базы данных представляет собой последовательность переходов от словесного описания информационной структуры предметной области к
формализованному описанию объектов предметной области в терминах некоторой модели. В общем случае выделяют следующие этапы проектирования:
1. Анализ и описание предметной области информационной системы.
2. Концептуальное моделирование.
3. Построение логической модели
4. Построение физической модели

### Концептуальная модель
**Описание базы данных:**

1.  **Таблица "user\_role"**
    
    *   `user_role_id` (bigint, PK) - уникальный идентификатор роли пользователя.
    *   `user_type_name` (varchar(100)) - название роли пользователя.
2.  **Таблица "users"**
    
    *   `user_id` (bigserial, PK) - уникальный идентификатор пользователя.
    *   `full_name` (varchar(200)) - полное имя пользователя.
    *   `user_login` (varchar) - логин пользователя.
    *   `user_password` (varchar) - пароль пользователя.
3.  **Таблица "users\_user\_role"**
    
    *   `user_id` (integer, FK) - внешний ключ, связанный с таблицей "users".
    *   `user_role_id` (integer, FK) - внешний ключ, связанный с таблицей "user\_role".
4.  **Таблица "passport"**
    
    *   `passport_id` (bigserial, PK) - уникальный идентификатор паспорта.
    *   `passport_number` (bigint) - номер паспорта.
    *   `issuance` (varchar(500)) - место выдачи паспорта.
    *   `date_of_issuance` (timestamp) - дата выдачи паспорта.
    *   `division_code` (varchar(7)) - код подразделения.
    *   `registration` (varchar(500)) - место регистрации.
5.  **Таблица "customer"**
    
    *   `customer_id` (bigserial, PK) - уникальный идентификатор клиента.
    *   `customer_full_name` (varchar(200)) - полное имя клиента.
    *   `telephone_number` (bigint) - номер телефона клиента.
    *   `passport_id` (integer, FK) - внешний ключ, связанный с таблицей "passport" (с возможностью удаления паспорта).
6.  **Таблица "student"**
    
    *   `student_id` (bigserial, PK) - уникальный идентификатор студента.
    *   `student_full_name` (varchar(200)) - полное имя студента.
    *   `student_telephone` (bigint) - номер телефона студента.
7.  **Таблица "contracts"**
    
    *   `contract_id` (bigserial, PK) - уникальный идентификатор контракта.
    *   `contract_date_begin` (timestamp) - дата начала контракта.
    *   `contract_date_end` (timestamp) - дата окончания контракта.
    *   `education_date_start` (timestamp) - дата начала обучения.
    *   `education_date_end` (timestamp) - дата окончания обучения.
    *   `contract_price` (integer) - стоимость контракта.
    *   `creator_id` (integer, FK) - внешний ключ, связанный с таблицей "users" (с возможностью удаления создателя контракта).
    *   `customer_id` (bigint, FK) - внешний ключ, связанный с таблицей "customer".
    *   `student_id` (bigint, FK) - внешний ключ, связанный с таблицей "student".

**Связи между таблицами:**

*   Таблица "users\_user\_role" связывает таблицы "users" и "user\_role" через внешние ключи `user_id` и `user_role_id`.
*   Таблица "customer" связана с таблицей "passport" через внешний ключ `passport_id`.
*   Таблица "contracts" связана с таблицами "users" (через `creator_id`), "customer" (через `customer_id`) и "student" (через `student_id`).
### Логическая модель базы данных
![image](/images/er_schema.png)

### Физическая модель Базы данных
Физическая модель и наполнение таблиц базы данных представлено в файле [backup.dump](backup.dump)
